## 一期目标

从 0 到 1 有一个可用的大群管理后台，能检索和更改群的名字和状态，能进行财务查询，财务发放和记录导出等相关财务管理功能

### 主体结构

主体结构是一个普通的管理后台结构，左侧是主要功能列表菜单，右侧是主要的操作界面，文档后面的附录里有两个参考图

右侧的主要操作页面里，多级页面需要有 面包屑导航

### 未登录

直接提示未登录，然后跳转到
Mixin 授权登录页，流程是一个 OAuth 流程

### 登录后

> 所有功能都是需要登录授权的，如果接口 401 了就去授权登陆。

登录后默认进入群管理-群列表页

### 基本规范

> 代码清晰，结构良好可维护

1. 所有的删除，更新等等更改数据的操作，需要有一个 Dialog 二次确认的过程。
2. Table 页是指带有分页功能的行列数据表格页，每页的条目数可以修改。上方需要有搜索框支持通过 `group_id` 过滤数据。Table 需要能够固定将某一列（操作按钮） PIN 在右侧
3. 所有的页面上需要选择用户作为输入的地方，统一是有 3 个输入选项 3 选 1，这个建议做成一个「选择用户组件」：
   1. 选择某个群的所有用户，大致是一个通过输入群号，搜索群的小组件，确认是该群之后获取该群的所有用户
   2. 提供一个多行的文本输入框，每行输入一个 `user_id`
   3. 文件上传，允许操作者上传一个 csv 文件

### 需求清单

- 群管理 #1
  - 群列表
    - 这是一个 Table 页
    - 列表上展示的信息是 id, name, status. status 0 表示关闭，1 表示开启
    - 最右固定展示 2 个按钮，分别是 开启/停止 群，详情
    - 开启/停止 按钮点击修改对应群的状态和切换按钮文案
    - 详情 跳转到详情页
  - 群详情页
    - 这是一个信息展示页面，展示群的各种基本信息
    - 群的详情页信息包括了 群头像 id name status 默认语音 群简介 创建时间 更新时间 client_id。展示的时候分个组，比如把头像，id，name，status，简介，默认语言为一组信息，其他信息为一组，分别放在两个内容卡片上。
    - 通过群列表点击跳转过来的 url 带上 `group_id` 打开页面
    - 右上角需要 编辑、删除、发消息 按钮
    - 点编辑到编辑群信息页，点发消息到群发消息页
  - 编辑群信息
    - 这是一个表单页
    - url 上带上 `group_id`
    - 上方展示群的头像，id
    - 目前页面上只需要提供对群 name 和 状态的修改即可，也就是一个文本输入框和一个选择器即可
  - 群发消息
    - 这是一个表单页
    - 表单包含一个文本输入框负责输入要发送的消息和选择用户组件
    - 输入完消息，选好用户，点击确认按钮群发消息
- 财务管理 #1
  - 奖励金发放
    - 这是一个 Table 页
    - 列表上需要展示的数据信息是除了时间以外的所有信息，phone 可以合并成一项通过 phone_code + phone_number 的结合展示 (比如 +86 18612345678)
    - 查询条件除了 `group_id` 外，这个页面还需要多个可选的搜索参数，分别是姓名、手机号、身份证和时间段
    - 右上角 按钮为 导出 CNY 发放数据、反馈 CNY 发放结果，批量修改状态
    - 导出 CNY 发放数据 是生成一个 csv 下载保存到本地
    - 反馈 CNY 发放结果 则是 文件上传按钮，从本地上传一个 csv。
    - 批量修改状态按钮在点击后页面进入编辑状态：Table 进入可以复选的状态（比如第一列多出来一列复选框），Table 上方显示出一个状态选择器和 3 个按钮，分别是反选、确定修改、结束修改。选择器状态是 `未发放/已发放/发放错误`，点击反选按钮会将所有记录反选，点击确定修改按钮会将已选中的所有数据批量修改为对应状态，**批量修改后，不结束编辑状态**。当点击结束修改时，结束编辑状态（防止额外的误操作）。

额外说明

1. 原本的一期需求取消：由于涉及 keystore 文件，私钥安全性问题，就是下面这个先不做啦

   - ~~新建群~~
     - ~~这是一个表单页~~
     - ~~页面上列举出来创建一个群需要的各种参数和确定按钮~~

2. 群头像信息是通过获取 Mixin 的官方用户 API 得到的，Mixin 的官方 API 文档: [Mixin Read Profile API](https://developers.mixin.one/document/bot/api/profile)
